# BEGIN performance tweaks (mostly for Dreamhost, but should work most places)
# See http://wiki.dreamhost.com/Htaccess_tricks
<IfModule mod_deflate.c>
	AddOutputFilterByType DEFLATE text/text text/html text/plain text/xml text/css application/x-javascript application/javascript text/javascript
</IfModule>
<ifModule mod_expires.c>
	ExpiresActive On
	ExpiresDefault "access plus 5 seconds"
	ExpiresByType application/font-woff "access plus 1 week"
	ExpiresByType application/font-woff2 "access plus 1 week"
	ExpiresByType image/svg+xml "access plus 1 week"
	ExpiresByType application/vnd.ms-fontobject "access plus 1 week"
	ExpiresByType application/x-font-opentype "access plus 1 week"
	ExpiresByType application/x-font-truetype "access plus 1 week"
	ExpiresByType application/x-font-woff "access plus 1 week"
	ExpiresByType image/gif "access plus 1 week"
	ExpiresByType image/jpeg "access plus 1 week"
	ExpiresByType image/png "access plus 1 week"
	ExpiresByType image/x-icon "access plus 1 week"
	ExpiresByType application/x-shockwave-flash "access plus 1 week"
	ExpiresByType text/css "access plus 604800 seconds"
	ExpiresByType text/javascript "access plus 216000 seconds"
	ExpiresByType application/javascript "access plus 216000 seconds"
	ExpiresByType application/x-javascript "access plus 216000 seconds"
	ExpiresByType text/html "access plus 600 seconds"
	ExpiresByType application/xhtml+xml "access plus 600 seconds"
</ifModule>
<IfModule pagespeed_module>
	ModPagespeed on
	ModPagespeedEnableFilters remove_comments
</IfModule>
# END manual performance tweaks

Options All -Indexes

# BEGIN Cornershop
# VCS lockdown
#  Deny access to version control content
#  Will not work if both Alias & Rewrite modules are disabled
#  To verify with git content, check these two URLs:
#   1. /.git/HEAD
#   2. /.gitignore
<IfModule mod_alias.c>
	# Deny access to VCS content using Alias Module
	RedirectMatch 404 ^(.*/)?\.(git|svn|hg|bzr)+
</IfModule>
<IfModule !mod_alias.c>
	<IfModule mod_rewrite.c>
		# If Alias Module is not available but Rewrite Module is,
		# use Rewrite Module to deny access to VCS content
		RewriteEngine On
		RewriteBase /
		RewriteRule ^(.*/)?\.(git|svn|hg|bzr)+ - [R=404,L]
	</IfModule>
</IfModule>
# END Cornershop

# BEGIN Block WordPress xmlrpc.php requests
<Files cms/xmlrpc.php>
	order deny,allow
	deny from all
	# allow from 123.456.789.101
</Files>
# END xmlrpc blocking

# BEGIN WordPress
<IfModule mod_rewrite.c>
	RewriteEngine On
	RewriteBase /
	RewriteRule ^index\.php$ - [L]
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteCond %{REQUEST_FILENAME} !-d
	RewriteRule . /index.php [L]
</IfModule>
# END WordPress
